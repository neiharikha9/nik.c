#include <stdio.h>
#include <stdlib.h>
#include <string.h>
#include <ctype.h>
int precedence(char op){
    switch(op){
        case '+':
        case '-':
        return 1;
        case '*':
        case '/':
        return 2;
        case '^':
        return 3;
        default:
        return 0;
    }
}
char* convertInfixToPrefix(char* infixExp){
    int len = strlen(infixExp), top = -1, x = 0;
    char* prefix = (char*)malloc(len+1);
    char operator[len];
    for(int i=0 ; i<len ; i++){
        char ch = infixExp[i];
        if(isalnum(ch)){
            prefix[x++] = ch;
        }
        else if(ch=='+' || ch=='-' || ch=='*' || ch=='/' || ch=='^'){
            while(top!=-1 && precedence(ch)<=precedence(operator[top]) && ch!='^')
            prefix[x++] = operator[top--];
            operator[++top] = ch;
        } 
        else if(ch==')'){
            operator[++top] = ch;
        }
        else if(ch=='('){
            while(operator[top] != '(')
            prefix[x++] = operator[top--];
            top--;
        }
    }
    while(top!=-1)
    prefix[x++] = operator[top--];
    prefix[x] = '\0';
    return prefix;
}
int main(){
   char infix[] = "A+B*C-D";
   char* prefix = convertInfixToPrefix(infix);
   printf("Prefix: %s\n", prefix);
   free(prefix);
   return 0;
}
